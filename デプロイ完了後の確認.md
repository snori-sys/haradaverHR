# デプロイ完了後の確認

## ✅ デプロイ成功

Vercelでのデプロイが完了しました！

## 📋 確認事項

### ステップ1: 環境変数の確認（重要）

デプロイが完了しましたが、環境変数が設定されているか確認してください。

1. **Vercelダッシュボードでプロジェクトを開く**
   - 左側のメニューから「Settings」をクリック
   - 「Environment Variables」をクリック

2. **以下の5つの環境変数が設定されているか確認**:

   - [ ] `NEXT_PUBLIC_SUPABASE_URL`
   - [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY`
   - [ ] `SUPABASE_SERVICE_ROLE_KEY`
   - [ ] `JWT_SECRET`
   - [ ] `JWT_EXPIRES_IN`

3. **環境変数が設定されていない場合**:

   **「Environment Variables」セクションで以下を追加**:

   | 名前 | 値 | 環境 |
   |------|-----|------|
   | `NEXT_PUBLIC_SUPABASE_URL` | `https://hgcmbmcjzdfugbnljkel.supabase.co` | Production, Preview, Development |
   | `NEXT_PUBLIC_SUPABASE_ANON_KEY` | `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhnY21ibWNqemRmdWdibmxqa2VsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM2NzY3NTksImV4cCI6MjA3OTI1Mjc1OX0.E_XkUK1Ue6OS6PFEfjmhYqD4p2HSPUXt7j2fx5Bts5c` | Production, Preview, Development |
   | `SUPABASE_SERVICE_ROLE_KEY` | `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhnY21ibWNqemRmdWdibmxqa2VsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MzY3Njc1OSwiZXhwIjoyMDc5MjUyNzU5fQ.4wjAxywhvQSSbLZXKbOT4EBlyjghChEyZ3s5QEvpPXQ` | Production, Preview, Development |
   | `JWT_SECRET` | `apRIKYbcsO2ya4V8ZVEMHKJ1Zx4HHUDWwZ/Xt7hLopo=` | Production, Preview, Development |
   | `JWT_EXPIRES_IN` | `24h` | Production, Preview, Development |

   **重要**: 各環境変数で、Production, Preview, Development すべてを選択してください。

4. **環境変数を設定した後、再デプロイが必要な場合**:
   - Deployments → 最新のデプロイを選択 → 「Redeploy」をクリック
   - または、Settings → Environment Variables → 「Redeploy」ボタンをクリック

### ステップ2: アプリケーションの動作確認

デプロイが完了したら、提供されたURLにアクセスして動作を確認してください。

1. **デプロイURLを確認**
   - Vercelダッシュボードに表示されているURL
   - 例: `https://cmsbeppin.vercel.app`

2. **動作確認**:

   - [ ] ホームページが表示される
   - [ ] 顧客登録が動作する
   - [ ] 顧客ログインが動作する
   - [ ] 顧客ダッシュボードが表示される
   - [ ] 管理者登録が動作する（`/admin/register`）
   - [ ] 管理者ログインが動作する
   - [ ] 管理者ダッシュボードが表示される

### ステップ3: エラーの確認

動作しない場合、以下を確認してください：

1. **ブラウザのコンソール（F12）でエラーを確認**
2. **Vercelのログを確認**
   - Deployments → 最新のデプロイ → 「Logs」タブをクリック
3. **環境変数が正しく設定されているか確認**
4. **Supabaseの接続を確認**

## 🎉 デプロイ完了

すべてが正常に動作していれば、本番環境へのリリースが完了です！

## 🔄 今後の更新

コードを更新したら、GitHubにプッシュするだけで自動的に再デプロイされます：

```bash
cd /Users/sawashimanoriyuki/point-card-pwa

# 変更を追加
git add .

# コミット
git commit -m "更新内容"

# プッシュ（既存のコードをマージしてから）
git pull origin main --allow-unrelated-histories
git push -u origin main
```

Vercelが自動的に再デプロイします！

## 📝 デプロイ情報の記録

デプロイが完了したら、以下の情報を記録してください：

```
デプロイURL: https://cmsbeppin.vercel.app
デプロイ日時: 2025-01-21
プロジェクト名: cmsbeppin
```

これで本番環境へのリリースが完了です！

